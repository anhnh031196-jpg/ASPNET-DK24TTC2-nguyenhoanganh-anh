@model WebsiteDatLichChuyenNha.Models.Booking

@{
    ViewData["Title"] = "Chi Ti·∫øt ƒê∆°n H√†ng";
}

<div class="fade-in">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>üì¶ Chi Ti·∫øt ƒê∆°n H√†ng #@Model.Id</h2>
        <a asp-action="Bookings" class="btn btn-outline-primary">‚Üê Quay L·∫°i</a>
    </div>

    <div class="row">
        <div class="col-md-8">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">üìã Th√¥ng Tin ƒê∆°n H√†ng</h5>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <strong>Kh√°ch H√†ng:</strong>
                            <p>@Model.CustomerName</p>
                        </div>
                        <div class="col-md-6">
                            <strong>S·ªë ƒêi·ªán Tho·∫°i:</strong>
                            <p>@Model.PhoneNumber</p>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <strong>Ng√†y Chuy·ªÉn:</strong>
                            <p>@Model.MoveDate.ToString("dd/MM/yyyy")</p>
                        </div>
                        <div class="col-md-6">
                            <strong>Ng√†y T·∫°o:</strong>
                            <p>@Model.CreatedAt.ToString("dd/MM/yyyy HH:mm")</p>
                        </div>
                    </div>

                    <div class="mb-3">
                        <strong>ƒê·ªãa Ch·ªâ ƒêi:</strong>
                        <p>@Model.FromAddress</p>
                    </div>

                    <div class="mb-3">
                        <strong>ƒê·ªãa Ch·ªâ ƒê·∫øn:</strong>
                        <p>@Model.ToAddress</p>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <strong>Kho·∫£ng C√°ch:</strong>
                            <p>@Model.Distance km</p>
                        </div>
                        <div class="col-md-6">
                            <strong>∆Ø·ªõc T√≠nh Chi Ph√≠:</strong>
                            <p class="text-primary fw-bold">@Model.EstimatedCost.ToString("N0") VNƒê</p>
                        </div>
                    </div>

                    @if (!string.IsNullOrEmpty(Model.Notes))
                    {
                        <div class="mb-3">
                            <strong>Ghi Ch√∫ Kh√°ch H√†ng:</strong>
                            <p>@Model.Notes</p>
                        </div>
                    }

                    @if (!string.IsNullOrEmpty(Model.AdminNotes))
                    {
                        <div class="alert alert-info">
                            <strong>üìù Ghi Ch√∫ Admin:</strong>
                            <p class="mb-0">@Model.AdminNotes</p>
                        </div>
                    }
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">‚öôÔ∏è C·∫≠p Nh·∫≠t Tr·∫°ng Th√°i</h5>
                </div>
                <div class="card-body">
                    <form asp-action="UpdateStatus" method="post">
                        <input type="hidden" name="id" value="@Model.Id" />

                        <div class="mb-3">
                            <label class="form-label fw-bold">Tr·∫°ng Th√°i Hi·ªán T·∫°i:</label>
                            @if (Model.Status == "M·ªõi")
                            {
                                <p><span class="badge badge-new">M·ªõi</span></p>
                            }
                            else if (Model.Status == "ƒê√£ x√°c nh·∫≠n")
                            {
                                <p><span class="badge badge-confirmed">ƒê√£ x√°c nh·∫≠n</span></p>
                            }
                            else if (Model.Status == "ƒêang x·ª≠ l√Ω")
                            {
                                <p><span class="badge badge-processing">ƒêang x·ª≠ l√Ω</span></p>
                            }
                            else if (Model.Status == "Ho√†n th√†nh")
                            {
                                <p><span class="badge badge-completed">Ho√†n th√†nh</span></p>
                            }
                            else
                            {
                                <p><span class="badge badge-cancelled">@Model.Status</span></p>
                            }
                        </div>

                        <div class="mb-3">
                            <label for="status" class="form-label fw-bold">C·∫≠p Nh·∫≠t Tr·∫°ng Th√°i:</label>
                            <select class="form-select" id="status" name="status" required>
                                <option value="M·ªõi" selected="@(Model.Status == "M·ªõi")">M·ªõi</option>
                                <option value="ƒê√£ x√°c nh·∫≠n" selected="@(Model.Status == "ƒê√£ x√°c nh·∫≠n")">ƒê√£ x√°c nh·∫≠n</option>
                                <option value="ƒêang x·ª≠ l√Ω" selected="@(Model.Status == "ƒêang x·ª≠ l√Ω")">ƒêang x·ª≠ l√Ω</option>
                                <option value="Ho√†n th√†nh" selected="@(Model.Status == "Ho√†n th√†nh")">Ho√†n th√†nh</option>
                                <option value="H·ªßy" selected="@(Model.Status == "H·ªßy")">H·ªßy</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="adminNotes" class="form-label fw-bold">Ghi Ch√∫ / Ph√¢n C√¥ng:</label>
                            <textarea class="form-control" id="adminNotes" name="adminNotes" rows="4" placeholder="V√≠ d·ª•: Ph√¢n c√¥ng cho ƒë·ªôi A, xe t·∫£i 5 t·∫•n...">@Model.AdminNotes</textarea>
                            <small class="text-muted">Ghi ch√∫ n√†y ch·ªâ admin m·ªõi th·∫•y</small>
                        </div>

                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">üíæ L∆∞u Thay ƒê·ªïi</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
